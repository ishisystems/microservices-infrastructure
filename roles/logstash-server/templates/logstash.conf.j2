input {
   # redis {
   #     host => "redis.service.consul"
   #     type => "redis-input"
   #     # these settings should match the output of the agent
   #     data_type => "list"
   #     key => "logstash"
   #     # We use json_event here since the sender is a logstash agent
   #     message_format => "json_event"
   #   }
   kafka {
    topic_id => "topic1"
  reset_beginning => true
  zk_connect => "zookeeper.service.consul:2181"
   }
}

filter {
  if [type] == "syslog" {
    mutate {
      replace => { "host" => "cirrus-node3" }
    }
  }
}

output {
 elasticsearch { host => ["elasticsearch.service.consul:9200"] protocol => http }
 stdout {
    codec => rubydebug
  }
}